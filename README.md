# ModbusTCP2MQTT
> My organization has renamed to MatterVN. All "TenySmart" repos will be redirected to "MatterVN".
> Please check and update your urls.
Sungrow &amp; SMA Solar Inverter addon for Home Assistant.
This addon will connect directly to your Inverter using ModbusTCP/MobusWebTCP

<img src="images/diagram.gif"/>

## Support models
**The Inverter must be accessible on the network using TCP.**

### PV Grid-Connected String Inverters
SG30KTL, SG10KTL, SG12KTL, SG15KTL, SG20KTL, SG30KU, SG36KTL, SG36KU, SG40KTL, SG40KTL-M, SG50KTL-M, SG60KTL-M, SG60KU, SG30KTL-M, SG30KTL-M-V31, SG33KTL-M, SG36KTL-M, SG33K3J, SG49K5J, SG34KJ, LP_P34KSG, SG50KTL-M-20, SG60KTL, SG80KTL, SG80KTL-20, SG60KU-M, SG5KTL-MT, SG6KTL-MT, SG8KTL-M, SG10KTL-M, SG10KTL-MT, SG12KTL-M, SG15KTL-M, SG17KTL-M, SG20KTL-M, SG80KTL-M, SG111HV, SG125HV, SG125HV-20, SG30CX, SG33CX, SG36CX-US, SG40CX, SG50CX, SG60CX-US, SG110CX, SG250HX, SG250HX-US, SG100CX, SG100CX-JP, SG250HX-IN, SG25CX-SA, SG75CX, SG3.0RT, SG4.0RT, SG5.0RT, SG6.0RT, SG7.0RT, SG8.0RT, SG10RT, SG12RT, SG15RT, SG17RT, SG20RT

### PV Grid-Connected String Inverters Gen 2
SG5K-D, SG8K-D

### Residential Hybrid Inverters
SH5K-20, SH3K6, SH4K6, SH5K-V13, SH5K-30, SH3K6-30, SH4K6-30, SH5.0RS, SH3.6RS, SH4.6RS, SH6.0RS, SH10RT, SH8.0RT, SH6.0RT, SH5.0RT


## Installation
1. Navigate in your Home Assistant frontend to Supervisor -> Add-on Store.
2. Click the 3-dots menu at upper right ... -> Repositories and add [https://github.com/MatterVN/HassioAddon](https://github.com/TenySmart/HassioAddon)
3. Install ModbusTCP2MQTT Addon
4. Configure and Start it

## smart_meter: True - (Only needed for SG* Models) 
Set to true if you have a smart meter installed, this will return power usage at the meter box, without it you can not calculate house power usage. Hybrid inverters will provide this by default (load_power_hybrid)

## Registers
This tool should be able to access most registers exposed. Some registers only exposed to MQTT, you must create sensor manually. (Sorry i don't have time):

level: 1 - This is the most useful data for day to day

Level: 2 - This should be everything your inverter supports

Level: 3 - This will try every register, you will get lots of 0/65535 responses for registers not supported.

### Useful Registers:
This is just a brief list of registers I have found useful

daily_power_yields - Total Power in kWh generated today
total_power_yields - Total Power in kWh generated since inverter install
total_running_time - Total Hours inverter has been powered on since install
internal_temperature - Internal temperature of the Inverter
total_active_power - Current power being generated by the inverter in Watts
meter_power - (SG* Models)Power usage at the meter box, needs a smart meter installed. +ve means consuming from the grid, -ve means exporting to the grid
load_power - Power being consumed in total
load_power_hybrid - (SH* Models only) Power being consumed in total
export_to_grid - How much being currently exported to the grid. For SG* Models this is calculated from meter_power if -ve value, returned as a positive value. (For Hybrid models export_power_hybrid is used)
import_from_grid - How much being currently imported from grid. This is calculated from meter_power if +ve value (_for hybrid models export_power_hybrid [will be negative when importing from grid] is used)
timestamp - Last time data was collected, based on Inverters clock by default

## Meta
  
This add-on is based on [SunGather](https://github.com/bohdan-s/SunGather)
